cc_library(
    name = "user",
    srcs = glob(
        [
            "communication/inc/*.h",
            "hal/inc/*.h",
            "hal/shared/*.h",
            "services/inc/*.h",
            "system/inc/*.h",
            "system/src/*.h",
            "wiring/inc/**/*.h",
            "wiring/src/**/*.cpp",
            "wiring_globals/src/**/*.cpp",
            "dynalib/inc/*.h",
            "hal/src/gcc/*.h",
            "hal/src/gcc/*.cpp",
            "platform/MCU/gcc/inc/*.h",
            "user/tests/unit/stubs/system_*.cpp",
        ],
    ) + [
        "hal/src/template/adc_hal.cpp",
        "hal/src/template/can_hal.cpp",
        "hal/src/template/core_subsys_hal.cpp",
        "hal/src/template/dac_hal.cpp",
        "hal/src/template/i2c_hal.cpp",
        "hal/src/template/memory_hal.cpp",
        "hal/src/template/pinmap_hal.cpp",
        "hal/src/template/product_store_hal.cpp",
        "hal/src/template/pwm_hal.cpp",
        "hal/src/template/servo_hal.cpp",
        "hal/src/template/spi_hal.cpp",
        "hal/src/template/syshealth_hal.cpp",
        "hal/src/template/tone_hal.cpp",
    ],
    hdrs = glob(["user/inc/*.h"]),
    defines = [
        "SPARK_NO_PLATFORM",
        "PLATFORM_ID=3",
        "DEBUG_BUILD",
        "USE_STDPERIPH_DRIVER",
        "HAL_PLATFORM_ERROR_MESSAGES=1",
        "PLATFORM_THREADING=0",
        "UNIT_TEST",
    ],
    includes = [
        "communication/inc",
        "dynalib/inc",
        "hal/inc",
        "hal/shared",
        "hal/src/gcc",
        "platform/MCU/gcc/inc",
        "services/inc",
        "system/inc",
        "system/src",
        "wiring/inc",
    ],
    strip_include_prefix = "user/inc",
    visibility = ["//visibility:public"],
    deps = [
        "@boost//:asio",
        "@boost//:crc",
        "@boost//:format",
        "@boost//:program_options",
        "@boost//:random",
        "@boost//:signals2",
        "@boost//:system",
        "@boost//:thread",
    ],
)
